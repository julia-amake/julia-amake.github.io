"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[563],{"./shared/ui/CroppedText/CroppedText.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return CroppedText_stories}});var react=__webpack_require__("../node_modules/react/index.js"),jsx_runtime=__webpack_require__("../node_modules/react/jsx-runtime.js");const calcMiddle=(start,end)=>Math.floor((start+end)/2),getTestText=(text,indexTo)=>text.slice(0,indexTo).trimEnd()+"Рђд",CroppedText=(0,react.memo)((_ref=>{let{rows:rows,opened:opened,children:children,className:className}=_ref;const[croppedText,setCroppedText]=(0,react.useState)("ле"),lineHeight=(0,react.useRef)(0),elem=(0,react.useRef)(null),start=(0,react.useRef)(0),end=(0,react.useRef)(children.length),middle=(0,react.useRef)(calcMiddle(start.current,end.current)),reset=(0,react.useCallback)((()=>{start.current=0,end.current=children.length,middle.current=calcMiddle(start.current,end.current),setCroppedText(getTestText(children,middle.current))}),[children]);return(0,react.useLayoutEffect)((()=>{elem.current&&(lineHeight.current=elem.current.getBoundingClientRect().height)}),[]),(0,react.useEffect)((()=>{reset()}),[reset,rows,children,opened]),(0,react.useLayoutEffect)((()=>{if(!elem.current||!children||end.current<start.current||"ле"===croppedText)return;if(elem.current.getBoundingClientRect().height<=lineHeight.current*rows)return children.trimEnd().length===middle.current?(setCroppedText(children),void(end.current=-1)):(start.current=middle.current+1,middle.current=calcMiddle(start.current,end.current),void setCroppedText(getTestText(children,middle.current)));end.current=middle.current-1,middle.current=calcMiddle(start.current,end.current),setCroppedText(getTestText(children,middle.current))}),[croppedText,opened]),(0,react.useLayoutEffect)((()=>{const currElem=elem.current;if(!currElem)return;const resizeObserver=new ResizeObserver((entries=>{entries.forEach((()=>{reset()}))}));return resizeObserver.observe(currElem),()=>{currElem&&resizeObserver.unobserve(currElem),reset()}}),[reset]),children?(0,jsx_runtime.jsx)("div",{className:className,ref:elem,children:opened?children:croppedText}):null}));CroppedText.displayName="CroppedText";try{CroppedText.displayName="CroppedText",CroppedText.__docgenInfo={description:"",displayName:"CroppedText",props:{rows:{defaultValue:null,description:"",name:"rows",required:!0,type:{name:"number"}},opened:{defaultValue:null,description:"",name:"opened",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/shared/ui/CroppedText/CroppedText.tsx#CroppedText"]={docgenInfo:CroppedText.__docgenInfo,name:"CroppedText",path:"src/shared/ui/CroppedText/CroppedText.tsx#CroppedText"})}catch(__react_docgen_typescript_loader_error){}var CroppedText_stories={title:"shared/CroppedText",component:CroppedText,args:{rows:4,opened:!1,children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. A culpa doloribus illo libero maxime       non quia velit voluptate. Accusamus ad commodi deserunt doloribus dolorum ea enim esse eveniet       expedita illo, laboriosam maiores minima nemo odit, perferendis praesentium quasi quia       recusandae repellat sint, sit vitae voluptate. Aliquam, corporis delectus eveniet facere       fugiat illo illum impedit incidunt ipsam iste iure, iusto modi nesciunt nobis nostrum nulla       obcaecati odit pariatur provident rem repellat repellendus rerum sequi sunt tempore veritatis       voluptate? Asperiores assumenda dolor est hic natus possimus quaerat quas quidem sed       veritatis? Consequatur ea illum incidunt inventore modi odio rem sunt ut voluptates!"}};const Template=args=>(0,jsx_runtime.jsx)("div",{style:{maxWidth:700},children:(0,jsx_runtime.jsx)(CroppedText,{...args})});Template.displayName="Template";const Default=Template.bind({});Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <div style={{\n  maxWidth: 700\n}}>\n    <CroppedText {...args} />\n  </div>",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]}}]);